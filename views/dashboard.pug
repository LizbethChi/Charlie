extends ./layout/index.pug

block mainContent
  h3(class="text-2xl font-semibold text-white mb-6") Estado Actual

  // ======================
  // TARJETAS RESUMEN
  // ======================
  div(class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6 mb-8")

    // Operadores activos
    div(class="bg-blue-500/10 p-4 rounded-xl border border-blue-400/20")
      h4(class="text-sm text-gray-400") Operadores activos
      p#tarjetaOperadores(class="text-3xl font-bold text-blue-400 mt-1") 0

    // Máquinas en uso
    div(class="bg-green-500/10 p-4 rounded-xl border border-green-400/20")
      h4(class="text-sm text-gray-400") Máquinas en uso
      p#tarjetaMaquinas(class="text-3xl font-bold text-green-400 mt-1") 0

    // Alertas registradas
    div(class="bg-red-500/10 p-4 rounded-xl border border-red-400/20")
      h4(class="text-sm text-gray-400") Alertas registradas
      p#tarjetaAlertas(class="text-3xl font-bold text-red-400 mt-1") 0

  // ======================
  // GRÁFICA DE TENDENCIA
  // ======================
  div(class="bg-gray-900/40 border border-gray-700 p-4 rounded-xl shadow mb-10 h-[260px]")
    h4(class="text-gray-300 font-semibold mb-3") Tendencia de Alertas (últimos minutos)
    div(class="h-[180px]")
      canvas#chartAlertas

  // ======================
  // ALERTAS RECIENTES
  // ======================
  div(class="bg-gray-900/40 border border-gray-700 p-4 rounded-xl shadow mb-10 h-[260px] overflow-hidden")

    h4(class="text-lg font-semibold text-gray-300 mb-3") Alertas recientes

    // CONTENEDOR SCROLLEABLE
    div(
      id="alertContainer"
      class="flex flex-col gap-4 h-[180px] overflow-y-auto pr-2 custom-scroll"
    )
      // JS insertará las alertas aquí


    // ===============================
    // MODAL CENTRADO MODERNO
    // ===============================
    div#modalOverlay(class="hidden fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50")
      div#modalContent(class="bg-gray-900 rounded-2xl p-6 max-w-md w-full shadow-2xl relative transform scale-95 opacity-0 transition-all duration-200")

        // Botón cerrar
        button#closeModal(class="absolute top-3 right-3 text-white/60 hover:text-white text-2xl") ×

        h3(class="text-xl font-bold text-white mb-4") Información del operador

        div(class="space-y-2 text-gray-300")
          p
            b Nombre:
            span#modalNombre.ml-1
          p
            b Estado:
            span#modalEstado.ml-1
          p
            b Máquina:
            span#modalMaquina.ml-1
          p
            b Hora:
            span#modalFecha.ml-1
          p
            b Edad:
            span#modalEdad.ml-1
          p
            b Experiencia:
            span#modalExp.ml-1

        div(class="mt-4 bg-gray-800 p-3 rounded-lg border border-gray-700")
          b Descripción:
          p#modalDescripcion(class="text-gray-400 text-sm mt-1")

  // SCRIPTS
  script(src="https://cdn.jsdelivr.net/npm/chart.js")
  script(src="/js/main.js")
